<launch>

    <!-- Opens Gazebo -->
    <include file="$(find gazebo_ros)/launch/empty_world.launch"/>  

    <!-- URDF - Param Server -->
    <param name= "robot_description" textfile="$(find urdf_manipulator)/urdf/urdf_manipulator.urdf"/>

    <!-- Spawner -->
    <node
        name="urdf_spawner"
        pkg="gazebo_ros"
        type="spawn_model"
        args="-urdf -param robot_description -model urdf_manipulator -x 0 -y 0 -z 0"
        respawn="false"
        output="screen" />

    <!-- Load controller type - Param Server -->
    <rosparam
        file="$(find urdf_manipulator)/config/joint_controllers.yaml"
        command="load">
    </rosparam>

    <!-- Spawn the controller type -->
    <node
        name="controller_spawner"
        pkg="controller_manager"
        ns="/theRobot"
        type="spawner"
        args="
            joint_state_controller
            arm_controller">
    </node>

    <node
        name="joint_state_publisher"
        pkg="joint_state_publisher"
        type="joint_state_publisher">
    </node>
    <node
        name="robot_state_publisher"
        pkg="robot_state_publisher"
        type="robot_state_publisher">
    </node>

</launch>
